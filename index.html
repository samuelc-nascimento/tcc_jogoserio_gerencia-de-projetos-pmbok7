<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Work Quest - Serious Game</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Outfit', sans-serif;
            background-color: #0f172a;
        }
        .glass-panel {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .progress-bar {
            transition: width 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        .choice-card {
            transition: all 0.2s ease;
            cursor: pointer;
        }
        .choice-card:hover {
            transform: scale(1.01);
            border-color: #22d3ee;
            background: rgba(30, 41, 59, 0.9);
        }
        @keyframes pulse-border {
            0% { box-shadow: 0 0 0 0 rgba(34, 211, 238, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(34, 211, 238, 0); }
            100% { box-shadow: 0 0 0 0 rgba(34, 211, 238, 0); }
        }
        .committee-alert {
            animation: pulse-border 2s infinite;
        }
    </style>
</head>
<body class="text-slate-200 min-h-screen flex items-center justify-center p-4">

    <div id="game-app" class="w-full max-w-5xl">
        
        <!-- DASHBOARD DE MÉTRICAS -->
        <div class="grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
            <div class="glass-panel p-4 rounded-xl">
                <div class="flex justify-between items-center mb-2">
                    <span class="text-xs font-semibold uppercase tracking-wider text-slate-400">Orçamento</span>
                    <span id="val-budget" class="text-lg font-bold text-emerald-400">100%</span>
                </div>
                <div class="w-full bg-slate-800 h-2 rounded-full overflow-hidden">
                    <div id="bar-budget" class="progress-bar bg-emerald-500 h-full" style="width: 100%"></div>
                </div>
            </div>
            <div class="glass-panel p-4 rounded-xl">
                <div class="flex justify-between items-center mb-2">
                    <span class="text-xs font-semibold uppercase tracking-wider text-slate-400">Cronograma</span>
                    <span id="val-schedule" class="text-lg font-bold text-amber-400">100%</span>
                </div>
                <div class="w-full bg-slate-800 h-2 rounded-full overflow-hidden">
                    <div id="bar-schedule" class="progress-bar bg-amber-500 h-full" style="width: 100%"></div>
                </div>
            </div>
            <div class="glass-panel p-4 rounded-xl">
                <div class="flex justify-between items-center mb-2">
                    <span class="text-xs font-semibold uppercase tracking-wider text-slate-400">Qualidade</span>
                    <span id="val-quality" class="text-lg font-bold text-cyan-400">80%</span>
                </div>
                <div class="w-full bg-slate-800 h-2 rounded-full overflow-hidden">
                    <div id="bar-quality" class="progress-bar bg-cyan-500 h-full" style="width: 80%"></div>
                </div>
            </div>
            <div class="glass-panel p-4 rounded-xl">
                <div class="flex justify-between items-center mb-2">
                    <span class="text-xs font-semibold uppercase tracking-wider text-slate-400">Moral</span>
                    <span id="val-morale" class="text-lg font-bold text-purple-400">80%</span>
                </div>
                <div class="w-full bg-slate-800 h-2 rounded-full overflow-hidden">
                    <div id="bar-morale" class="progress-bar bg-purple-500 h-full" style="width: 80%"></div>
                </div>
            </div>
        </div>

        <!-- CONTAINER PRINCIPAL -->
        <div id="screen-container" class="glass-panel rounded-2xl overflow-hidden shadow-2xl min-h-[500px] flex flex-col">
            
            <!-- TELA: INICIAL -->
            <div id="view-start" class="p-12 text-center my-auto">
                <div class="inline-block p-3 rounded-2xl bg-cyan-500/20 mb-6">
                    <svg class="w-12 h-12 text-cyan-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
                </div>
                <h1 class="text-4xl font-bold mb-4 bg-gradient-to-r from-cyan-400 to-blue-500 bg-clip-text text-transparent">Project Work Quest v1</h1>
                <p class="text-lg text-slate-400 mb-8 max-w-2xl mx-auto">
                    Aperfeiçoe sua tomada de decisão estratégica baseada no PMBOK 7ª Edição.
                </p>
                <button onclick="Game.goToOnboarding()" class="bg-cyan-600 hover:bg-cyan-500 text-white font-bold py-4 px-10 rounded-xl transition-all shadow-lg shadow-cyan-900/20">
                    Iniciar Missão
                </button>
            </div>

            <!-- TELA: ONBOARDING -->
            <div id="view-onboarding" class="hidden p-12 max-w-3xl mx-auto my-auto">
                <h2 class="text-3xl font-bold text-white mb-6">Seu Papel: Gerente de Projetos Senior</h2>
                <div class="space-y-4 text-slate-300 leading-relaxed mb-8">
                    <p>Você acaba de assumir o comando na <strong class="text-cyan-400">TechNova Soluções</strong>.</p>
                    <p>O objetivo é o lançamento do <strong class="text-white">App Phoenix</strong>, uma plataforma de logística urbana. A diretoria quer velocidade, mas a equipe exige respeito aos processos técnicos.</p>
                    <p class="bg-slate-800/50 p-4 rounded-lg border-l-4 border-cyan-500 text-sm">
                        <strong>Lembre-se:</strong> Terminar o prazo com 0% de qualidade ou moral é considerado fracasso. O mercado rejeitará um produto bugado e sua equipe abandonará o suporte se estiver exausta.
                    </p>
                </div>
                <div class="flex justify-center">
                    <button onclick="Game.startProject()" class="bg-cyan-600 hover:bg-cyan-500 text-white font-bold py-3 px-12 rounded-xl transition-all">
                        Assumir Responsabilidade
                    </button>
                </div>
            </div>

            <!-- TELA: EVENTO -->
            <div id="view-event" class="hidden flex-1 flex flex-col">
                <div class="p-8 border-b border-slate-700">
                    <div class="flex items-center gap-4 mb-4">
                        <span id="event-week" class="bg-slate-700 text-cyan-400 px-3 py-1 rounded-lg text-sm font-bold tracking-widest uppercase">Semana 01</span>
                        <div class="committee-alert bg-cyan-500/10 border border-cyan-500/30 px-3 py-1 rounded-lg text-[10px] font-bold text-cyan-400 flex items-center gap-2 uppercase">
                            <span class="relative flex h-2 w-2"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-cyan-400 opacity-75"></span><span class="relative inline-flex rounded-full h-2 w-2 bg-cyan-500"></span></span>
                            Pausa para Comitê: Analise os Impactos
                        </div>
                    </div>
                    <div class="flex gap-6 items-start">
                        <img id="npc-avatar" src="" class="w-20 h-20 rounded-2xl border-2 border-slate-700 object-cover shadow-lg" alt="Avatar">
                        <div>
                            <h2 id="event-title" class="text-2xl font-bold mb-2 text-white italic">Título do Evento</h2>
                            <p id="event-desc" class="text-slate-400 leading-relaxed"></p>
                        </div>
                    </div>
                </div>
                
                <div class="p-8 bg-slate-900/50 flex-1">
                    <div id="options-grid" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <!-- Gerado via JS -->
                    </div>
                </div>
            </div>

            <!-- TELA: FEEDBACK -->
            <div id="view-feedback" class="hidden p-8 flex-1 flex flex-col">
                <div class="text-center mb-8">
                    <h2 class="text-3xl font-bold text-white mb-2">Consequências</h2>
                    <p id="feedback-desc" class="text-slate-400">Resumo do que aconteceu.</p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                    <div class="bg-emerald-500/5 border border-emerald-500/20 rounded-2xl p-6">
                        <h3 class="text-emerald-400 font-bold uppercase text-[10px] tracking-widest mb-4 flex items-center gap-2">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18"></path></svg>
                            Impactos Positivos
                        </h3>
                        <ul id="list-gains" class="space-y-2"></ul>
                    </div>
                    <div class="bg-red-500/5 border border-red-500/20 rounded-2xl p-6">
                        <h3 class="text-red-400 font-bold uppercase text-[10px] tracking-widest mb-4 flex items-center gap-2">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path></svg>
                            Impactos Negativos
                        </h3>
                        <ul id="list-losses" class="space-y-2"></ul>
                    </div>
                </div>

                <div class="bg-blue-500/10 border border-blue-500/20 rounded-2xl p-6 mb-8 mt-auto">
                    <div class="flex gap-4">
                        <div class="bg-blue-500/20 p-2 h-fit rounded-lg text-blue-400">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg>
                        </div>
                        <div>
                            <h4 class="text-blue-400 font-bold text-xs uppercase mb-1 tracking-widest">Nota Pedagógica PMBOK 7</h4>
                            <p id="pmbok-tip" class="text-slate-300 text-sm italic leading-relaxed"></p>
                        </div>
                    </div>
                </div>

                <div class="flex justify-center">
                    <button onclick="Game.nextEvent()" class="bg-slate-700 hover:bg-slate-600 text-white font-bold py-3 px-12 rounded-xl transition-all">
                        Prosseguir
                    </button>
                </div>
            </div>

            <!-- TELA: FINAL -->
            <div id="view-end" class="hidden p-12 text-center my-auto">
                <div id="end-icon" class="mb-6 inline-block p-4 rounded-full"></div>
                <h2 id="end-title" class="text-4xl font-bold mb-4"></h2>
                <p id="end-desc" class="text-slate-300 mb-8 text-lg max-w-2xl mx-auto"></p>
                <div id="final-stats" class="grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8"></div>
                <button onclick="location.reload()" class="bg-cyan-600 hover:bg-cyan-500 text-white font-bold py-4 px-10 rounded-xl">
                    Reiniciar Simulação
                </button>
            </div>

        </div>
    </div>

    <script>
        const Game = {
            state: {
                budget: 100,
                schedule: 100,
                quality: 80,
                morale: 80,
                currentWeek: 1,
                eventIndex: 0
            },

            avatars: {
                leona: "https://img.freepik.com/psd-gratuitas/renderizacao-3d-do-estilo-de-cabelo-para-o-design-do-avatar_23-2151869157.jpg",
                david: "https://img.freepik.com/psd-gratuitas/renderizacao-3d-de-avatar_23-2150833546.jpg",
                bia: "https://img.freepik.com/psd-gratuitas/renderizacao-3d-do-estilo-de-cabelo-para-o-design-do-avatar_23-2151869149.jpg",
                carlos: "https://img.freepik.com/psd-gratuitas/renderizacao-3d-de-avatar_23-2150833548.jpg"
            },

            db: [
                {
                    id: 1, week: 1, char: "david",
                    title: "Escopo em Expansão",
                    desc: "David quer incluir funcionalidades de IA no MVP agora. 'É o que os investidores querem ver!', diz ele.",
                    options: [
                        { id: 'A', type: "Agressiva", text: "Aceitar Imediatamente", expl: "Instruir a equipe a mudar o foco para IA agora mesmo.", impact: { budget: -15, schedule: -15, quality: -5, morale: 5 }, feedback: "David está radiante, mas o custo e o cronograma sofreram um impacto pesado." },
                        { id: 'B', type: "Conservadora", text: "Negar e Seguir Plano", expl: "Manter o escopo fechado para garantir a estabilidade do cronograma.", impact: { budget: 0, schedule: 0, quality: 5, morale: -5 }, feedback: "O projeto segue no trilho, mas David se sente desapontado com sua falta de 'visão'." },
                        { id: 'C', type: "Negligente", text: "Tentar fazer tudo", expl: "Aceitar a IA sem mudar o prazo ou contratar mais gente.", impact: { budget: 0, schedule: -10, quality: -15, morale: -20 }, feedback: "O caos se instalou. Ninguém sabe o que priorizar e a qualidade despencou." },
                        { id: 'D', type: "Equilibrada", text: "Criar um Protótipo", expl: "Desenvolver uma prova de conceito (POC) rápida em paralelo.", impact: { budget: -5, schedule: -5, quality: 0, morale: 5 }, feedback: "Você validou a ideia técnica sem comprometer o núcleo do projeto. Stakeholders calmos." }
                    ],
                    pmbokTip: "O Engajamento das Partes Interessadas exige equilíbrio entre expectativas e viabilidade técnica."
                },
                {
                    id: 2, week: 3, char: "leona",
                    title: "Dívida Técnica Crítica",
                    desc: "Leona alerta: 'O código está uma bagunça. Se não pararmos para organizar (Refatorar), o app vai travar no lançamento.'",
                    options: [
                        { id: 'A', type: "Agressiva", text: "Ignorar e Entregar", expl: "Focar em funcionalidades visíveis. Código feio não aparece para o cliente.", impact: { budget: 0, schedule: 5, quality: -30, morale: -15 }, feedback: "Entregas rápidas, mas Leona está furiosa e o sistema está instável." },
                        { id: 'B', type: "Conservadora", text: "Parar e Refatorar", expl: "Parar novas tarefas por uma semana para limpeza técnica profunda.", impact: { budget: -10, schedule: -20, quality: 25, morale: 10 }, feedback: "A base agora é sólida, mas David está cobrando o atraso no cronograma." },
                        { id: 'C', type: "Negligente", text: "Empurrar com a Barriga", expl: "Pedir que refatorem apenas se houver tempo livre (o que nunca há).", impact: { budget: 0, schedule: -5, quality: -10, morale: -5 }, feedback: "Nada mudou. O problema continua crescendo e a equipe se sente desvalorizada." },
                        { id: 'D', type: "Equilibrada", text: "Refatoração Gradual", expl: "Dedicar 20% do tempo de cada dia para melhoria contínua.", impact: { budget: -5, schedule: -5, quality: 10, morale: 5 }, feedback: "Qualidade melhorando sem parar a produção. Um compromisso saudável." }
                    ],
                    pmbokTip: "O Princípio da Qualidade garante que o valor entregue seja sustentável a longo prazo."
                },
                {
                    id: 3, week: 5, char: "bia",
                    title: "Crise de Segurança",
                    desc: "Bia detectou que dados sensíveis estão expostos. 'É uma falha de segurança grave!', ela alerta.",
                    options: [
                        { id: 'A', type: "Agressiva", text: "Correção de Emergência", expl: "Aplicar um remendo rápido (Hotfix) sem passar por todos os testes.", impact: { budget: 0, schedule: 0, quality: -20, morale: -10 }, feedback: "O vazamento parou, mas o sistema ficou 'remendado' e instável." },
                        { id: 'B', type: "Conservadora", text: "Rollback Total", expl: "Restaurar a versão anterior estável e auditar o erro com calma.", impact: { budget: -5, schedule: -20, quality: 20, morale: 0 }, feedback: "Decisão corajosa. Dados protegidos, mas o cronograma sofreu um atraso massivo." },
                        { id: 'C', type: "Negligente", text: "Minimizar o Risco", expl: "Dizer que é improvável alguém explorar a falha e seguir o plano.", impact: { budget: -20, schedule: 0, quality: -40, morale: -20 }, feedback: "Houve um ataque. A reputação da TechNova foi destruída e multas pesadas virão." },
                        { id: 'D', type: "Equilibrada", text: "Força-Tarefa de 48h", expl: "Focar toda a equipe na correção segura sem outras distrações.", impact: { budget: -10, schedule: -10, quality: 15, morale: 10 }, feedback: "Problema resolvido com união e segurança. A equipe sentiu sua liderança firme." }
                    ],
                    pmbokTip: "A Resposta a Riscos e Incertezas requer integridade e foco na mitigação de impactos negativos."
                }
            ],

            goToOnboarding: function() { this.showView('onboarding'); },
            startProject: function() { this.updateUI(); this.showView('event'); this.renderEvent(); },

            updateUI: function() {
                const s = this.state;
                document.getElementById('val-budget').textContent = s.budget + '%';
                document.getElementById('val-schedule').textContent = s.schedule + '%';
                document.getElementById('val-quality').textContent = s.quality + '%';
                document.getElementById('val-morale').textContent = s.morale + '%';
                document.getElementById('bar-budget').style.width = s.budget + '%';
                document.getElementById('bar-schedule').style.width = s.schedule + '%';
                document.getElementById('bar-quality').style.width = s.quality + '%';
                document.getElementById('bar-morale').style.width = s.morale + '%';
            },

            showView: function(id) {
                ['view-start', 'view-onboarding', 'view-event', 'view-feedback', 'view-end'].forEach(v => document.getElementById(v).classList.add('hidden'));
                document.getElementById('view-' + id).classList.remove('hidden');
            },

            renderEvent: function() {
                const ev = this.db[this.state.eventIndex];
                if(!ev) { this.endGame('finish'); return; }
                document.getElementById('event-week').textContent = "Semana " + ev.week.toString().padStart(2, '0');
                document.getElementById('event-title').textContent = ev.title;
                document.getElementById('event-desc').textContent = ev.desc;
                document.getElementById('npc-avatar').src = this.avatars[ev.char];
                
                const grid = document.getElementById('options-grid');
                grid.innerHTML = '';
                ev.options.forEach(opt => {
                    const btn = document.createElement('button');
                    btn.className = "glass-panel p-5 rounded-xl text-left choice-card border-l-4 border-slate-600 flex flex-col gap-1";
                    if(opt.id === 'A') btn.classList.add('border-l-red-500');
                    if(opt.id === 'B') btn.classList.add('border-l-emerald-500');
                    if(opt.id === 'C') btn.classList.add('border-l-amber-500');
                    if(opt.id === 'D') btn.classList.add('border-l-cyan-500');
                    btn.innerHTML = `
                        <div class="flex justify-between items-center"><span class="text-[9px] font-bold uppercase text-slate-500">${opt.type}</span><span class="bg-slate-800 text-[10px] px-2 py-0.5 rounded text-slate-400 font-bold">${opt.id}</span></div>
                        <p class="font-bold text-white text-sm">${opt.text}</p>
                        <p class="text-[11px] text-slate-400 leading-tight">${opt.expl}</p>
                    `;
                    btn.onclick = () => this.handleChoice(opt, ev);
                    grid.appendChild(btn);
                });
            },

            handleChoice: function(opt, ev) {
                this.state.budget += opt.impact.budget;
                this.state.schedule += opt.impact.schedule;
                this.state.quality += opt.impact.quality;
                this.state.morale += opt.impact.morale;
                ['budget', 'schedule', 'quality', 'morale'].forEach(k => this.state[k] = Math.max(0, Math.min(100, this.state[k])));
                this.updateUI();
                this.showFeedback(opt, ev);
            },

            showFeedback: function(opt, ev) {
                document.getElementById('feedback-desc').textContent = opt.feedback;
                document.getElementById('pmbok-tip').textContent = ev.pmbokTip;
                const gl = document.getElementById('list-gains'), ll = document.getElementById('list-losses');
                gl.innerHTML = ''; ll.innerHTML = '';
                const lbls = { budget: "Orçamento", schedule: "Prazo", quality: "Qualidade", morale: "Moral" };
                Object.entries(opt.impact).forEach(([k, v]) => {
                    if(v === 0) return;
                    const li = document.createElement('li');
                    li.className = "text-xs flex justify-between";
                    li.innerHTML = `<span>${lbls[k]}</span> <span class="font-bold ${v > 0 ? 'text-emerald-400' : 'text-red-400'}">${v > 0 ? '+' : ''}${v}%</span>`;
                    if(v > 0) gl.appendChild(li); else ll.appendChild(li);
                });
                this.showView('feedback');
            },

            nextEvent: function() {
                // Checagem imediata de falência
                if(this.state.budget <= 0 || this.state.schedule <= 0) {
                    this.endGame('failure');
                    return;
                }

                this.state.eventIndex++;
                if(this.state.eventIndex >= this.db.length) {
                    this.endGame('finish');
                } else {
                    this.renderEvent();
                    this.showView('event');
                }
            },

            endGame: function(reason) {
                const s = this.state;
                const title = document.getElementById('end-title');
                const desc = document.getElementById('end-desc');
                const icon = document.getElementById('end-icon');
                const stats = document.getElementById('final-stats');

                let finalTitle = "";
                let finalDesc = "";
                let iconSVG = "";
                let colorClass = "";

                // Lógica Multidimensional de Fim de Jogo
                if (reason === 'failure' || s.budget <= 0 || s.schedule <= 0) {
                    finalTitle = "Projeto Interrompido";
                    finalDesc = s.budget <= 0 ? "Os recursos financeiros acabaram. A diretoria cancelou o projeto e você foi demitido." : "O prazo estourou de forma catastrófica. O cliente desistiu da parceria.";
                    iconSVG = `<svg class="w-16 h-16 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>`;
                    colorClass = "text-red-500";
                } 
                else if (s.quality < 50) {
                    finalTitle = "Lançamento Fracassado";
                    finalDesc = "O App Phoenix chegou ao mercado, mas os bugs constantes e a instabilidade tornaram o produto inutilizável. O cliente desistiu do projeto após o lançamento.";
                    iconSVG = `<svg class="w-16 h-16 text-orange-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>`;
                    colorClass = "text-orange-500";
                }
                else if (s.morale < 40) {
                    finalTitle = "Vitória de Pirro";
                    finalDesc = "Você lançou o app, mas a um custo humano terrível. Leona e Bia pediram demissão e não há equipe para manter o projeto vivo. Sucesso insustentável.";
                    iconSVG = `<svg class="w-16 h-16 text-purple-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg>`;
                    colorClass = "text-purple-500";
                }
                else {
                    finalTitle = "Lançamento de Sucesso!";
                    finalDesc = "Parabéns, Gestor! O App Phoenix é um sucesso. Você equilibrou as pressões dos stakeholders, protegeu a qualidade e manteve a equipe motivada.";
                    iconSVG = `<svg class="w-16 h-16 text-emerald-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>`;
                    colorClass = "text-emerald-500";
                }

                title.textContent = finalTitle;
                title.className = `text-4xl font-bold mb-4 ${colorClass}`;
                desc.textContent = finalDesc;
                icon.innerHTML = iconSVG;
                icon.className = `mb-6 inline-block p-4 rounded-full ${colorClass.replace('text', 'bg')}/10`;

                stats.innerHTML = `
                    <div class="glass-panel p-4 rounded-xl text-center"><span class="text-[10px] text-slate-500 uppercase">Orçamento Final</span><span class="text-xl font-bold text-emerald-400 block">${s.budget}%</span></div>
                    <div class="glass-panel p-4 rounded-xl text-center"><span class="text-[10px] text-slate-500 uppercase">Prazo Final</span><span class="text-xl font-bold text-amber-400 block">${s.schedule}%</span></div>
                    <div class="glass-panel p-4 rounded-xl text-center"><span class="text-[10px] text-slate-500 uppercase">Qualidade Final</span><span class="text-xl font-bold text-cyan-400 block">${s.quality}%</span></div>
                    <div class="glass-panel p-4 rounded-xl text-center"><span class="text-[10px] text-slate-500 uppercase">Moral Equipe</span><span class="text-xl font-bold text-purple-400 block">${s.morale}%</span></div>
                `;

                this.showView('end');
            }
        };
        window.Game = Game;
    </script>
</body>
</html>